select 
a.proID, a.proName, ifnull(c.counting,0) as proUnlock, 
a.proRemains-ifnull(b.counting,0) as proRemains, a.proImg, a.unlockDays 
from sign_pro a
left join 
(
select count(1) as counting, proID from sign_exchange group by proID
) b on b.proID=a.proID
left join 
(
select count(1) as counting, unlock_proid from sign_unlock where isvalid='1' group by unlock_proid
) c on c.unlock_proid=a.proID
where a.isvalid='1'
